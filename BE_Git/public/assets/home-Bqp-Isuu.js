import{f as r}from"./fetch-ZGf-g78y.js";const m=document.querySelector(".createuser");m.addEventListener("click",async t=>{t.preventDefault(),console.log("Nyt luodaan käyttäjä");const o="http://127.0.0.1:3000/api/users",e=document.querySelector(".create_user_form"),a=e.querySelector("input[name=username]").value,s=e.querySelector("input[name=password]").value,l=e.querySelector("input[name=email]").value,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:s,email:l})};r(o,n).then(i=>{console.log(i)})});const d=document.querySelector(".loginuser");d.addEventListener("click",async t=>{t.preventDefault(),console.log("Nyt logataan sisään");const o="http://127.0.0.1:3000/api/auth/login",e=document.querySelector(".login_form"),a=e.querySelector("input[name=username]").value,s=e.querySelector("input[name=password]").value,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:s})};r(o,c).then(n=>{console.log(n),console.log(n.token),localStorage.setItem("token",n.token),n.token==null?alert("Käyttäjänimi tai salasana väärin"):window.location.href="index.html",u("loginResponse",`localStorage set with token value: ${n.token}`)})});const p=document.querySelector("#meRequest");p.addEventListener("click",async()=>{console.log("Testataan TOKENIA ja haetaan käyttäjän tiedot");const t="http://127.0.0.1:3000/api/auth/me",o=localStorage.getItem("token");console.log(o);const e={method:"GET",headers:{Authorization:"Bearer: "+o}};console.log(e),r(t,e).then(a=>{console.log(a)})});const y=document.querySelector("#clearButton");y.addEventListener("click",g);function u(t,o){document.getElementById(t).innerText=o}function g(){localStorage.removeItem("token"),u("clearResponse","localStorage cleared!")}
